pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
--rocket test
--by toastylilghosty

--bullet number
bullet_num = 0
--score
score = 0
--lives
lives = 3
--game over
gameover = false
--hit
is_hit = false
function _init()
	--player
	player = {}
	player.x = 40
	player.y = 100
	player.sprite = 1
	--bullets
	bullets = {}
	--bullet
	bullet = {}
    max_bullets = 15
	
    spr(001, 0, 0)
    create_bullet()
    create_bullet()
end


map_x = 0
bullet_timer = 0
max_bullet_time = 15
function _update()
    if(not gameover) then 
        if(t() % 2 == 0) then
        	score += 10
        end
       
        bullet_timer += .5
        max_bullet_time -= .01
        rectfill(0,0, 128,128, 0)
        map(map_x,0,10,25,15,20,0)
        map_x += .1
        if(map_x > 70)then
            map_x = 0
        end
        
        if(bullet_num < max_bullets and bullet_timer > max_bullet_time)then
            create_bullet()
        end

        if(score == 200) then
            max_bullets = 10
		elseif(score == 350) then
		--	max_bullets = 10
            max_bullet_time += .5       
        end
        move_bullet()
        move()
        print(tostring(score), 5, 5, 7)
    end 
	
end

function create_bullet()
	bullet_num += 1
	bullet_timer = 0
	add(bullets, {	
		x = 130,
		y = 10 + rnd(100),
		sprite = 016	})
end
	
function move_bullet()
 for b in all(bullets) do 
    if(bullet_collision(player.x, player.y,b)) then
      del(bullets, b)
        lives -= 1
        if(lives == 0) then
            game_over()
        end
    end
    
    if(not gameover) then
		b.x -= 2 * (t() / 25) + 2
		if(b.x > 64)then
			bullet_num -= 1
		end
        spr(b.sprite, b.x, b.y)
    end 
    end
end

draw_timer = 0
hit_timer = 0
function _draw()
	draw_timer += 1 
	if is_hit then       
        hit_timer = draw_timer
        pal(12,14)
        pal(1, 8)
        pal(3, 2)
        pal(15, 9)
        pal(0, 5)
        is_hit = false
    end
    
    --print(is_hit, 60, 120, 7)
 	--print(draw_timer, 20, 120, 7)
 	--print(hit_timer, 40, 120, 11)   
    if(draw_timer >= hit_timer + 30) then
        is_hit = false
    	pal()
    end
end
function move()
	if (btn(2)) then
		player.y -= 2
	elseif(btn(3)) then
		player.y += 2
	end	
	
	spr(player.sprite, player.x, player.y)
end	

function bullet_collision(x,y,bullet)	
	if (x >= bullet.x and x<= bullet.x+9 and y >= bullet.y and y <= bullet.y+9) then
		is_hit = true
		return true
    else
       -- is_hit = false
        return false
    end
end

function game_over()
    gameover = true
    rectfill(0, 0, 128, 128, 0)
    player.x = 45
    player.y = 45 
    				
    print("game over", 60, 50, 7)
    print(tostring(score), 60, 75, 7)
				print("score: ", 30, 75, 7);
end
__gfx__
0000000000ccc00000ccc00000000000000000000000000000000000000000000000000000000000008880000000000000000000000000000000000000000000
000000000ccccc000ccccc0000eeefe00000000000c0000000007000060000000000000000000000088888000000000000000000000000000000000000000000
007007000cf3f30003f3fc000eeeeefeeef000000c0c000000070700000000000000000000060010088888000000000000000000000000000000000000000000
000770000cffff000ffffc000eeeeeeeeeefe00000c0000000007000000000000000000000606000088888000000000000000000000000000000000000000000
000770000c1f1c000c1f1c000eeeeeeeeeeef0000000006000000090000000100000090000060000088888000000000000000000000000000000000000000000
00700700011111000111110008eeeeeeeeeeeee0000006060c000909000001010000909000000000088888000000000000000000000000000000000000000000
000000000f111f000f111f0000888888888888800000006000000090000000100000090001000010088888000000000000000000000000000000000000000000
00000000005050000050500000000000000000000000000000000000000000000000000000000000008080000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000fee00000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000ff0000000eef0eeefe000efe0000000000000000000000000000000000000000000000000000
009000a00000000000000000000000000000000000000eee000eeef00000eeeeeeeeefe0eeefee00000000000000000000000000000000000000000000000000
09a9a000000000000000000000000e000efe0000000eeeeeef08eee0000eeeeeeeeeeeefeeeefef0000000000000000000000000000000000000000000000000
9990990900000000000000000000eee0eeefe000000eeeeeeef08e000e0eeeeeeeeeeeeeeeeeeeeef00000000000000000000000000000000000000000000000
09a9a0000000000000000000000eeeeeeeeeef0000eeeeeeeeee00008ee08eeeeeeeeeeeeeeeeeeeef0000000000000000000000000000000000000000000000
009000a0000000000000000000eeeeeeeeeeeef0008eeeeeeeeee000888008888888888888888888888000000000000000000000000000000000000000000000
00000000000000000000000000088888888888800008888888888000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000700070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00009000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0009a9a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00999099090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0009a9a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00009000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000ccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000ccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000cf3f30000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000cffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000c1f1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000111110000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000f111f0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000050500000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000009000a0000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000009a9a000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000099909909000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000009a9a000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000009000a0000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000eeefe000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000eeeeefeeef00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000eeeeeeeeeefe000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000eeeeeeeeeeef000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000008eeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000088888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ff00000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eee000eeef0000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeeeef08eee0000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeeeeef08e00000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeeeeeeee0000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000008eeeeeeeeee000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000008888888888000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000fee00000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000eeefe0000000000000000000000eef0eeefe000efe00000000000000000000000000000000000000eeefe000000000000000
000000000000000000000000000eeeeefeeef00000000000000000eeeeeeeeefe0eeefee00000000000000000000000000000000000eeeeefeeef00000000000
00000000000efe0000000000000eeeeeeeeeefe00000000000000eeeeeeeeeeeefeeeefef0000000000000000000000000000000000eeeeeeeeeefe000000000
0000000000eeefe000000000000eeeeeeeeeeef000000000000e0eeeeeeeeeeeeeeeeeeeeef00000000000000000000000000000000eeeeeeeeeeef000000000
0000000000eeeeef000000000008eeeeeeeeeeeee0000000008ee08eeeeeeeeeeeeeeeeeeeef00000000000000000000000000000008eeeeeeeeeeeee0000000
0000000000eeeeeef000000000008888888888888000000000888008888888888888888888888000000000000000000000000000000088888888888880000000
0000000000888888800077007070777000000000bbb0000000000000000077707770700007707770000000000000000000000000000000000000000000000000
0000000000000000000007007070007000000000b0b0000000000000000070007070700070007000000000000000000000000000000000000000000000000000
0000000000000000000007007770777000000000b0b0000000000000000077007770700077707700000000000000000000000000000000000000000000000000
0000000000000000000007000070700000000000b0b0000000000000000070007070700000707000000000000000000000000000000000000000000000000000
0000000000000000000077700070777000000000bbb0000000000000000070007070777077007770000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000030400000000000000000000000000000000000000000000000003040000000000000000000000000000000000000000000000000000000000000000000000030400000000000000000000000000000000000000000000000003040000000000000000000000000000030400000000000000
0000000000001704000000000000000000000000000000151600000000000000170400000000000000000000000000000015160000000000001704000000000000000000001704000000000000000000000000000000151600000000000000170400000000000000000000000000001704000000000000000000000000000000
030400151600000304001516001514000304001718191a000000030400151600000304001516001514000304001718191a0000030400151600000304001516001718191a00000304001516001514000304001718191a0000000304001718191a030400151600151400030400151600000304001516001514000304001718191a
__sfx__
000100000000000000000000e4500e4500e4500e4500f4501645018450194501a4501c4501d4501f4502045018450184501a45028450274502445022450204501d4501545013450124500b450074500545004450
__music__
00 4e004344

